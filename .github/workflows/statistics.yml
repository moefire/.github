name: Log @moefire organization statistics

on:
  schedule:
    - cron: '0 1 * * *'
  workflow_dispatch:

jobs:
  Stats:
    runs-on: ubuntu-latest
    steps:
      - uses: gr2m/org-stats-action@v1.0.3
        id: stats
        with:
          org: moefire
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      - run: |
          cat << EOF
          result: ${{ steps.stats.outputs.data }}
          EOF
      - name: Modify README.md
        uses: jaywcjlove/github-action-modify-file-content@v1.4.4
        with:
          path: profile/README.md
          token: ${{ secrets.GITHUB_TOKEN }}
          body: |
            æœ¬æœˆæ´»è·ƒæƒ…å†µ: 
            | æ¡ç›® | æ´»è·ƒæƒ…å†µ |
            | :-- | :--: |
            |ðŸ±â€open issues| ${{ fromJson(steps.stats.outputs.data).openIssues }} |
            |ðŸ’»closed issues| ${{ fromJson(steps.stats.outputs.data).closedIssues }} |
            |ðŸ’¬open pull requests| ${{ fromJson(steps.stats.outputs.data).openPullRequests }} |
            |ðŸ•‘ï¸Žclosed pull requests| ${{ fromJson(steps.stats.outputs.data).closedPullRequests }}|
            |ðŸ”¥merged pull requests| ${{ fromJson(steps.stats.outputs.data).mergedPullRequests }}|
             
